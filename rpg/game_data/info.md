
### СПРАВОЧНИК ПО ИГРОВЫМ ДАННЫМ (Game Data Reference)

Этот документ описывает структуру и правила заполнения файлов в папке `rpg/game_data/`.

---

### 1. Черты характера (`traits.json`)

**Назначение:** Этот файл определяет все доступные "перки" (положительные черты) и "недостатки" (отрицательные черты), которые игрок может выбрать для своего персонажа. Файл представляет собой единый JSON **массив (список)**, где каждый элемент — это объект, описывающий одну черту.

#### **Структура объекта "Черта"**

| Ключ | Тип | Описание | Обязательно? |
| :--- | :--- | :--- | :--- |
| **`"id"`** | `string` | Уникальный машиночитаемый идентификатор. Используйте латиницу и `snake_case` (например, `night_vision`). | **Да** |
| **`"name"`** | `string` | Человеко-понятное название, которое будет отображаться в игре (например, "Ночное зрение"). | **Да** |
| **`"description"`**| `string` | Подробное описание того, что делает эта черта. Отображается как подсказка в интерфейсе. | **Да** |
| **`"cost"`** | `integer` | "Стоимость" черты в очках. **Отрицательное число** — это перк (тратит очки). **Положительное число** — это недостаток (дает очки). | **Да** |
| **`"effects"`** | `array` | Список объектов-эффектов, которые эта черта применяет к персонажу. Может быть пустым `[]`. См. **Справочник по Эффектам**. | **Да** |

---

### 2. Предметы (папка `items/`)

**Назначение:** Папка `items/` содержит `.json` файлы, сгруппированные по категориям. Каждый файл (например, `weapons.json`, `armor.json`) — это база данных для определенного типа предметов. Структура каждого такого файла — это JSON **массив (список)**, где каждый элемент — это объект, описывающий один предмет.

#### **Структура объекта "Предмет"**

| Ключ | Тип | Описание | Обязательно? |
| :--- | :--- | :--- | :--- |
| **`"id"`** | `string` | Уникальный машиночитаемый идентификатор предмета. | **Да** |
| **`"name"`** | `string` | Человеко-понятное название предмета. | **Да** |
| **`"slot"`** | `string` | Слот, который занимает предмет. Определяет, как его можно использовать. См. **Справочник по Слотам**. | **Да** |
| **`"description"`**| `string` | Художественное описание предмета, которое видит игрок. | **Да** |
| **`"effects"`** | `array` | Список объектов-эффектов, которые дает предмет. См. **Справочник по Эффектам**. | **Да** |

---

### 3. Справочник по Слотам (`slot`)

Поле `"slot"` определяет тип предмета и куда его можно экипировать.

#### **Слоты экипировки (для поля `character.equipment`)**
Эти предметы могут быть надеты на персонажа, и только в надетом состоянии их пассивные эффекты (`stat_modifier`, `armor_class` и т.д.) активны. В один слот можно надеть только один предмет.

| `slot` | Назначение |
| :--- | :--- |
| **`"head"`** | Головной убор: шлемы, капюшоны, диадемы. |
| **`"chest"`** | Нагрудник: кирасы, мантии, куртки. |
| **`"legs"`** | Поножи: штаны, латные поножи. |
| **`"feet"`** | Обувь: сапоги, сандалии. |
| **`"hands"`** | Перчатки: кожаные перчатки, латные рукавицы. |
| **`"cloak"`** | Плащ. |
| **`"amulet"`** | Амулет, ожерелье. |
| **`"ring"`** | Кольцо. (Для простоты можно начать с одного слота). |
| **`"weapon"`**| Оружие в основной руке: мечи, топоры, посохи. |
| **`"shield"`** | Предмет во второй руке: щиты, магические фокусы. |

#### **Функциональные слоты (для предметов в инвентаре)**
Эти предметы обычно находятся в инвентаре (`character.inventory`) и используются по-другому.

| `slot` | Назначение |
| :--- | :--- |
| **`"consumable"`** | **Расходуемый предмет.** Применяет свой эффект (`on_use: true`) один раз и исчезает. Примеры: зелья, свитки, еда. |
| **`"quest"`** | **Квестовый предмет.** Предмет, необходимый для выполнения задания. Обычно его нельзя выкинуть или продать. Эффекты обычно не имеет. |
| **`"material"`** | **Ресурс для ремесла/крафта.** Используется в системах алхимии, ковки и т.д. |
| **`"junk"`** | **Хлам.** Предметы без особой ценности, предназначенные для продажи или создания атмосферы. |

---

### 4. Справочник по Эффектам (`effects`)

Массив `"effects"` содержит список объектов, каждый из которых описывает одно конкретное правило, применяемое к персонажу. Ключевое поле в каждом объекте — это `"type"`.

| `type` | Назначение | Параметры | Пример |
| :--- | :--- | :--- | :--- |
| **`"stat_modifier"`** | **Модификатор Характеристики.** Напрямую изменяет базовую характеристику персонажа. **(Уже реализовано в `rules.py`)** | `"stat"`: `"strength"`, `"dexterity"`, `"intelligence"`, `"charisma"` <br> `"value"`: `число` (может быть отрицательным) | `{"type": "stat_modifier", "stat": "intelligence", "value": 1}` |
| **`"armor_class"`** | **Класс Брони.** Увеличивает общую защиту персонажа. (Потребует реализации в боевой системе). | `"value"`: `число` | `{"type": "armor_class", "value": 5}` |
| **`"damage"`** | **Урон.** Определяет урон, наносимый оружием. (Потребует реализации в боевой системе). | `"value"`: `строка` (формула, например, "1d8") <br> `"damage_type"`: `"slashing"`, `"piercing"`, `"bludgeoning"`, `"fire"`, `"ice"`, `"holy"` и т.д. | `{"type": "damage", "value": "1d8", "damage_type": "slashing"}` |
| **`"heal"`** | **Лечение.** Восстанавливает здоровье, обычно для расходуемых предметов. (Потребует реализации в игровой логике). | `"value"`: `строка` (формула, например, "2d4+2") <br> `"on_use"`: `true` (указывает, что эффект срабатывает при использовании) | `{"type": "heal", "value": "2d4+2", "on_use": true}` |
| **`"flag_modifier"`** | **Модификатор Флага.** Добавляет персонажу тег для ролевых проверок. (Потребует реализации в игровой логике). | `"flag"`: `строка` (название флага, например, "Resists_Poison") <br> `"action"`: `"add"` | `{"type": "flag_modifier", "flag": "Resists_Poison", "action": "add"}` |
| **`"check_bonus"`** | **Бонус к Проверке.** Дает бонус/штраф к проверкам навыков или сопротивлений. (Потребует реализации в игровой логике). | `"check"`: `строка` (тип проверки: "persuasion", "stealth", "perception", "fear" и т.д.) <br> `"value"`: `число` | `{"type": "check_bonus", "check": "stealth", "value": 10}` |